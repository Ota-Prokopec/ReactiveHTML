/*
  (c) LudvÃ­k Prokopec
  License: MIT
*/
(function(a){"use strict";a.ReactiveHTML===void 0&&(a.ReactiveHTML=function(){function a(a){return"object"==typeof a&&null!==a}function b(a,b){for(const[c,d]of Object.entries(a))c.startsWith("on")&&(b[c.replace("on","")]=d,delete a[c]);return{attrs:a,events:b}}function c(a){return a.reduce(function(a,b){return a.concat(Array.isArray(b)?c(b):b)},[])}function d(a){return a.map(a=>{let b=Object.getPrototypeOf(a);return b?(b=Object.getPrototypeOf(b),b?(b=b.constructor,"Component"===b.name?a.Vnode:a):a):a})}function e(a,b=null){return a?a(b):null}function f(a,b){return b.appendChild(a),a}function g(b){return a(b)?function(a){const b=document.createElement(a.tagName);for(const[c,d]of Object.entries(a.attrs))b.setAttribute(c,d);for(const[c,d]of Object.entries(a.events))b.addEventListener(c,d);return a.children.forEach(a=>{const c=g(a);b.appendChild(c)}),a.realDOM=b,b}(b):document.createTextNode(b)}function h(a,b){const c=[];for(let d=0;d<Math.min(a.length,b.length);d++)c.push([a[d],b[d]]);return c}function i(a,b){const c=[];for(const[d,e]of Object.entries(b))e!==a[d]&&c.push(function(a){return a.setAttribute(d,e),a});for(const d in a)d in b||c.push(function(a){return a.removeAttribute(d),a});return function(a){for(const b of c)b(a)}}const j=(a,b)=>{const c=[];a.forEach((a,d)=>{c.push(k(a,b[d]))});const d=[];for(const c of b.slice(a.length))d.push(a=>(a.appendChild(g(c)),a));return a=>{for(const[b,d]of h(c,a.childNodes))b(d);for(const b of d)b(a);return a}},k=(b,c)=>{if(c===void 0)return a=>{a.remove()};if(!a(b)||!a(c))return b===c?()=>void 0:a=>{const b=g(c);return a.replaceWith(b),b};if(b.tagName!==c.tagName)return a=>{const b=g(c);return a.replaceWith(b),b};const d=i(b.attrs,c.attrs),e=j(b.children,c.children);return a=>(d(a),e(a),a)};return{Component:class{constructor(b={},...c){const d=Object.getPrototypeOf(this);e(d.OnInit,b);const f={classLink:this,get(b,c){return a(b[c])?new Proxy(b[c],f):b[c]},set(a,b,c,f){a[b]=c,e(d.onChange,this.classLink);const g=d.Element(this.classLink.props,this.classLink.args);if(this.classLink.Vnode.realDOM){const a=k(this.classLink.Vnode,g);g.realDOM=a(this.classLink.Vnode.realDOM)}return Object.assign(this.classLink.Vnode,g),f}};return this.props=new Proxy(b,f),this.args=1<c.length?c:c[0],this.Vnode=d.Element(this.props,this.args),e(d.OnVnodeCreate,this),this}},Render:function(a,b){if(Array.isArray(a))a.forEach(a=>{this.Render(a,b)});else{const c=g(a.Vnode);return e(Object.getPrototypeOf(a).OnRender,a),f(c,b)}},Ready:function(a){window.addEventListener("DOMContentLoaded",a)},Await:function(a,b){const c=new MutationObserver(function(c,d){for(var e=0;e<c.length;e++)for(var f=0;f<c[e].addedNodes.length;f++)c[e].addedNodes[f].nodeType===Node.ELEMENT_NODE&&c[e].addedNodes[f].matches(a)&&(b(c[e].addedNodes[f]),d.disconnect())});c.observe(document.documentElement,{childList:!0,subtree:!0})},CreateElement:function(a,e,...f){null===e&&(e={});const g=b(e,{});return{tagName:a,attrs:g.attrs,children:d(c(f)),events:g.events}}}}())})(window);
